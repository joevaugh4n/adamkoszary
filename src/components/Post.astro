---
import Tag from "./Tag.astro";

interface Props {
  slug: string;
  title: string;
  date: string;
  prose: string;
  tags: string[];
}

const { slug, title, date, prose, tags } = Astro.props;

function convertTags(str: string) {
  return str.replace(/_/g, " ");
}

function formatDate(date: string) {
  return new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  }).format(new Date(date));
}

const link = `/posts/${slug}`;
---

<a
  href={link}
  class="p-4 border-2 h-full flex flex-col rounded-sm group hover:bg-black hover:text-white dark:hover:bg-slate-500 dark:hover:text-white transition-colors"
>
  <div class="flex-grow">
    <p class="text-sm mb-2">{formatDate(date)}</p>
    <h2 class="text-2xl uppercase mb-2">{title}</h2>
    <div class="mb-2" set:html={prose} />
  </div>
  <div class="flex gap-2 mt-2 flex-wrap">
    {
      tags &&
        tags.filter(Boolean).map((tag) => (
          <div class="bg-gray-200 px-3 py-1 rounded font-mono text-black">
            {convertTags(tag)}
          </div>
        ))
    }
  </div>
</a>
